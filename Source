--MIT License

--Copyright (c) 2025 LiquidPane

local RunService = game:GetService("RunService")

local function init()
	if shared.BetterDebris then return end
	shared.BetterDebris = {}
	
	if shared.BetterDebris.Bin then return end
	shared.BetterDebris.Bin = {}
	
	if shared.BetterDebris.Collector then return end
	shared.BetterDebris.Collector = RunService.PreRender:Connect(function()
		for item, infoTable in pairs(shared.BetterDebris.Bin) do

			if os.time() - infoTable.Time >= infoTable.Duration then
				item:Destroy()
				shared.BetterDebris.Bin[item] = nil
			end
		end
	end)
end

local function errorCheck(item, duration)
	if not item then 
		error(`Item cannot be of type "nil".`)
		return
	end
	if not item.Destroy then
		error(`Missing method "Destroy".`)
		return
	end
	if type(duration) ~= "number" then
		error(`Duration must be of type "number"`)
		return
	end

end

local function addItem(item: Instance, duration: number)
	errorCheck(item, duration)
	
	shared.BetterDebris.Bin[item] = {
		Time = os.time(),
		Duration = duration or 0
	}
end

init()
return {Add = addItem}
